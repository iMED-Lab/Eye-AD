#!/usr/bin/env python
# -*- encoding: utf-8 -*-
'''
@File        :uncertainty.py
@Description :
@Time        :2021/04/07 14:48:59
@Author      :Jinkui Hao
@Version     :1.0
'''

import numpy as np
import pandas as pd 
import matplotlib.pyplot as plt
import seaborn as sns


if __name__ == '__main__':
    # fileName = 'merge_resnet_v2/confidence_Base_In.txt'
    # with open(fileName, "r") as f:
    #     data = f.readline()
    #     array_list = data.split(';')[-1]
    #     array_list = array_list.split('')
    #     array = np.array(array_list)
    #     print(array)

    
#复杂性胸腔积液X55/李得良/01D4216626A2529A.jpg;0.6127424836158752;0.006867195479571819;
    # x = [0.65395373, 0.6073803,  0.5066743,  0.5750188,  0.70647794, 0.7166618,
    #         0.6505741,  0.7076706,  0.5232114,  0.71574324, 0.5351469,  0.6842926,
    #         0.5682831,  0.5065499,  0.71281624, 0.52746916, 0.5839465,  0.517132,
    #         0.7211136,  0.7248826,  0.70479167, 0.63763773, 0.5081444,  0.6252085,
    #         0.7035742,  0.5181037,  0.5238752,  0.7224425, 0.5261556,  0.66108686,
    #         0.521796,   0.7146186,  0.71394527, 0.5844452,  0.67843264, 0.51355726,
    #         0.5051686,  0.50933456, 0.5586097,  0.6136826,  0.7140955,  0.72124785,
    #         0.50777835, 0.700935,   0.58439195, 0.58204156, 0.513576,   0.5879358,
    #         0.70448697, 0.53102714] 
    #x = np.random.randint(0,10,50)

    # x = [0.6584816,  0.72412896, 0.70157874, 0.6137752,  0.7162321,  0.683855,
    #         0.6941716,  0.71412206, 0.5763019,  0.7149367,  0.67064655, 0.688498,
    #         0.70898604, 0.7033322,  0.71083623, 0.69162524, 0.7167686,  0.6876627,
    #         0.7198417,  0.7022656,  0.67721784, 0.6402959,  0.64364284, 0.72056764,
    #         0.71902966, 0.7069177,  0.6714403,  0.7025799,  0.6938135,  0.70615464,
    #         0.71413064, 0.7123799,  0.7091866,  0.6697062,  0.7120953,  0.6853353,
    #         0.6207709,  0.7115014,  0.6716687,  0.61284757, 0.718486,   0.635132,
    #         0.6767743,  0.7118507,  0.71277785, 0.5855711,  0.672917,  0.5027214,
    #         0.7186028,  0.6961281]

    # x = [0.73104376, 0.7310335,  0.731036,   0.73104197, 0.73103505, 0.73104537,
    #         0.7310365,  0.73103803, 0.73104274, 0.7310256,  0.7310362,  0.7310111,
    #         0.73104304, 0.73104125, 0.7310288,  0.73102415, 0.73104143, 0.73103863,
    #         0.73103607, 0.73104167, 0.7310359,  0.7310001,  0.73103565, 0.7310416,
    #         0.7310379,  0.73104304, 0.73102754, 0.73103243, 0.73103565, 0.73104036,
    #         0.7310425,  0.7310425,  0.731032,   0.7310378,  0.7310373,  0.7310447,
    #         0.73103946, 0.73104256, 0.73101634, 0.7310282, 0.7310127,  0.7310246,
    #         0.7310353,  0.7310355,  0.73102385, 0.73102826, 0.7310431,  0.73104054,
    #         0.7310509,  0.7310486]

    # x = [0.72749835, 0.7305274,  0.7281057,  0.7305957,  0.7302953,  0.7306194,
    #         0.7304876,  0.7297823,  0.72743315, 0.7282947,  0.72805345, 0.73073536,
    #         0.7299959,  0.730631,   0.72989774, 0.7290322,  0.73075306, 0.7293565,
    #         0.7290705,  0.7305492,  0.7301243,  0.7301586,  0.72973543, 0.73064893,
    #         0.7303996,  0.7288462,  0.7305202,  0.7300981,  0.72937876, 0.7283932,
    #         0.7301401,  0.7300681,  0.72989804, 0.7278471,  0.7304659,  0.7267988,
    #         0.7284222,  0.73057485, 0.7226645,  0.7303081,  0.72872424, 0.7306585,
    #         0.73049945, 0.7288551 , 0.73025584, 0.7295228,  0.72972125, 0.72905874,
    #         0.72847503, 0.72967356]
    # 单纯性胸腔积液X46/康庆花/EY1446815_ZX2736592_00002_00020_1414_W349L50.jpg
    # x = [0.5783264,  0.5195725,  0.5269354,  0.62908953, 0.66699356, 0.5730838,
    #         0.71972317, 0.5195976,  0.54518837, 0.51153195, 0.5718926,  0.6356452,
    #         0.6766401,  0.5205441,  0.5295278,  0.6712755,  0.68229085, 0.7229444,
    #         0.72072273, 0.53683704, 0.6869619,  0.5356566,  0.5167411, 0.6842316,
    #         0.67640346, 0.6653229,  0.5549384,  0.64225006, 0.71955484, 0.69483024,
    #         0.69597805, 0.7059567,  0.58590436, 0.60681885, 0.584952 ,  0.50110614,
    #         0.6926821,  0.6793466,  0.7220958,  0.6396646,  0.6952086,  0.51368046,
    #         0.5102631,  0.65542734, 0.62905014, 0.7189618,  0.6392332,  0.66863406,
    #         0.5041765,  0.61324036]
    
    # x = [0.70020205, 0.6721679,  0.6108327,  0.5836829,  0.6937532,  0.6455227,
    #         0.6868808,  0.69136876, 0.65187186, 0.70022726, 0.66156703, 0.6769478,
    #         0.6932266,  0.7110793,  0.70053375, 0.6644005,  0.60831416, 0.67687863,
    #         0.65226316, 0.71612024, 0.6538636,  0.6978633,  0.7066175,  0.70746636,
    #         0.63180166, 0.65886176, 0.68099916, 0.674843 ,  0.71335423, 0.5883296,
    #         0.6711272,  0.61174035, 0.6740483,  0.6919084,  0.6893742,  0.6827841,
    #         0.6966992,  0.6885208,  0.6686897,  0.683093,   0.691703,   0.69431674,
    #         0.7113258,  0.61119354, 0.69605803, 0.69863033, 0.6808139,  0.68779606,
    #         0.5974872,  0.5616749]
    # x = [0.73102725, 0.73102623, 0.7310375,  0.73097813, 0.7308619,  0.7309978,
    #         0.73103,   0.73100466, 0.73104566, 0.730966,   0.73094386, 0.73102766,
    #         0.7310215,  0.73102945, 0.73102534, 0.7309917,  0.7310495,  0.73104125,
    #         0.73092335, 0.73102057, 0.7310309,  0.7309777,  0.7310316,  0.73103684,
    #         0.73101443, 0.7310297,  0.7310132,  0.7309594,  0.7310279,  0.73103327,
    #         0.7309513,  0.73096716, 0.7310014, 0.73103654, 0.7310366,  0.73101676,
    #         0.73102385, 0.73104095, 0.7310061,  0.73104525, 0.73101467, 0.7310417,
    #         0.7310029,  0.73103714, 0.73103344, 0.73101425, 0.73100615, 0.7309712,
    #         0.7310336,  0.73101723]

    # x = [0.72967863, 0.7291115,  0.7268951,  0.72891515, 0.72777617, 0.7297221,
    #         0.7273931,  0.72993314, 0.73010767, 0.729312,   0.7287124,  0.73066354,
    #         0.7290509,  0.7245596,  0.72912335, 0.72869295, 0.72868407, 0.7285755,
    #         0.72918266, 0.72812754, 0.7287678,  0.7289238,  0.7279063,  0.727414,
    #         0.72893775, 0.72913986, 0.72856945, 0.730237,   0.7304544,  0.7282121,
    #         0.7292471,  0.72581935, 0.7297251,  0.728041,   0.72699136, 0.7261144,
    #         0.7270039,  0.73007244, 0.72615045, 0.7247673,  0.72999835, 0.72919446,
    #         0.72855157, 0.7276068,  0.729062,   0.72849166, 0.7251216,  0.72319764,
    #         0.7252334,  0.7293699]

    #单纯性胸腔积液X46/包菊仙/EY1313872_ZX2720732_00002_00011_638_W350L50.jpg
    # x = [0.50456655, 0.649017,   0.6237005,  0.5773354,  0.7216269,  0.6268096,
    #         0.640493,   0.69679534, 0.5267532,  0.678949,   0.61155915, 0.71995205,
    #         0.72371536, 0.7248784,  0.53538835, 0.50737184, 0.68403715, 0.6680127,
    #         0.71915597, 0.5036368,  0.6513442,  0.6394915,  0.6787435,  0.72512114,
    #         0.71541935, 0.6874308,  0.6700974,  0.53051245, 0.7229108,  0.53807724,
    #         0.56815386, 0.6992229,  0.5257854,  0.72415733, 0.5531803,  0.53737,
    #         0.6974854,  0.54510736, 0.62693185, 0.72094864, 0.60706496, 0.50921685,
    #         0.6996422,  0.6444979,  0.5919543,  0.71634465, 0.683165,   0.7004985,
    #         0.7168792,  0.5952252]

    # x = [0.71781117, 0.7241827,  0.7245804,  0.7248223,  0.7178215,  0.71348906,
    #         0.7087296,  0.7186296,  0.71357274, 0.7207602, 0.72539604, 0.72547114,
    #         0.7263026,  0.72257024, 0.7180136,  0.7214773,  0.7241649,  0.728331,
    #         0.715814,  0.71934986, 0.7216489,  0.7241823,  0.72845596, 0.7251328,
    #         0.72197044, 0.72412825, 0.71136206, 0.7207225,  0.72037417, 0.7225814,
    #         0.72511977, 0.7267824,  0.7190691,  0.7171878,  0.7049199,  0.7212453,
    #         0.7159808,  0.72696704, 0.71967065, 0.7246032,  0.7218621,  0.72680515,
    #         0.62600327, 0.7263831,  0.72501683, 0.7222278,  0.7239527,  0.7262379,
    #         0.71834373, 0.7290403]

    # x = [0.6221911,  0.5542464,  0.6550376,  0.5562041,  0.61414284, 0.6689796,
    #         0.5311759,  0.5558033,  0.6570555,  0.5013067,  0.5649811,  0.5121235,
    #         0.61792934, 0.54288185, 0.64926946, 0.67308086, 0.6142363,  0.5259354,
    #         0.59361166, 0.6644718,  0.6148889,  0.64710486, 0.54804736, 0.57252514,
    #         0.6042468,  0.6320919,  0.6779913,  0.5232386,  0.5936877,  0.5044595,
    #         0.5104626,  0.669095,   0.62851864, 0.56986,    0.5834959,  0.5969475,
    #         0.52766764, 0.5413449,  0.5454538,  0.5220385,  0.5751698,  0.67246044,
    #         0.50403845, 0.6355336,  0.58423376, 0.6489391,  0.6338583,  0.60104316,
    #         0.6045556,  0.6043938]

#梁世友
    # x = [0.51422334, 0.7001427,  0.5769259,  0.70142746, 0.5391706,  0.5788707,
    #         0.66958135, 0.707695,   0.6864517,  0.6405058,  0.53924346, 0.52838445,
    #         0.61990047, 0.665816,   0.6969808,  0.723177,   0.57244664, 0.5829954,
    #         0.6068601,  0.5246672,  0.5515579,  0.6970195,  0.7239739,  0.5633035,
    #         0.7268867,  0.5641732,  0.5700455,  0.5091301,  0.7039617,  0.7000497,
    #         0.71079135, 0.56657857, 0.59915006, 0.65043205, 0.70657384, 0.7007918,
    #         0.58933914, 0.55223024, 0.57849,   0.692322,   0.69050944, 0.6956342,
    #         0.5004938,  0.5505119,  0.697639,   0.7156805,  0.7158701,  0.67754024,
    #         0.6754603,  0.5299501]

    # x = [0.7288165,  0.72552395, 0.71553063, 0.7224099,  0.7265064,  0.72306263,
    #         0.72290903, 0.7271409,  0.71585006, 0.7137348,  0.72377175, 0.7218503,
    #         0.7277731,  0.71307796, 0.7208045,  0.7046903,  0.72759855, 0.7286563,
    #         0.7110072,  0.72715443, 0.72609794, 0.7009415,  0.7265245 , 0.72522205,
    #         0.7247398,  0.7255052,  0.72701466, 0.72131574, 0.71649706, 0.724385,
    #         0.7264995,  0.7283538,  0.7138995,  0.7145817,  0.7250343,  0.7202148,
    #         0.7283079,  0.7217518,  0.7228645,  0.72165877, 0.72202677, 0.7198396,
    #         0.72304857, 0.72886103, 0.68776584, 0.70234674, 0.71696234, 0.7069532,
    #         0.7192163,  0.72248214]

    x = [0.7173525,  0.6875274,  0.6353443,  0.56083906, 0.6959626,  0.6980945,
            0.70044756, 0.6618837,  0.6703185,  0.6364975,  0.70504034, 0.6925228,
            0.68890405, 0.67366755, 0.6843078,  0.7092473,  0.61668354, 0.70162815,
            0.5965039,  0.64335334, 0.5577216,  0.6694566,  0.70841396, 0.6500958,
            0.7140938,  0.7057833,  0.6728272,  0.70187604, 0.60092354, 0.70322764,
            0.68479294, 0.71777374, 0.6578674,  0.6888182,  0.5871615,  0.67555684,
            0.6216959,  0.6845906,  0.6528052,  0.6770768,  0.7201533,  0.7118579,
            0.69423157, 0.68274957, 0.66807103, 0.6954273,  0.52460504, 0.648341,
            0.7051922,  0.7090497]
    # y = []
    # for i in x:
    #     y.append(1-i)

    # x = y

    n = len(x)
    print('x= ',x)
    nbins = 10
    freq, bins = np.histogram(x, bins=nbins)

    f, ax = plt.subplots(figsize = (14, 10))

    cmap1 = sns.light_palette("orange", reverse=True, as_cmap=True)
    #palette

    freq_rate = freq / n
    bin_w = bins[1]-bins[0]
    print('bin_w:',bin_w)
    bin_h = freq_rate / bin_w
    sns.set_style("dark")
    sns.distplot(x, bins=nbins,
                 hist=False, # Whether to plot a (normed) histogram.
                 kde=True, 
                 norm_hist=True, # norm_hist = norm_hist or kde or (fit is not None); 如果为False且kde=False, 则高度为频数
                 ax = ax,kde_kws={"color": "y", "lw": 1.5}
                 )

    # sns.distplot(x, bins=nbins,
    #              hist=False, # Whether to plot a (normed) histogram.
    #              kde=True, 
    #              norm_hist=True, # norm_hist = norm_hist or kde or (fit is not None); 如果为False且kde=False, 则高度为频数
    #              kde_kws={"label": "density_est_by_sns.distplot",
    #                       "bw": bin_w # 带宽h, 确保和density_est的h一样, 和kdeplot的bw一样
    #                       }, ax = ax
    #              )
    ax.tick_params(axis='x', colors='w')
    ax.tick_params(axis='y', colors='w')
    #ax.set(xlim=(0.1, 0.75))
    ax.set(xlim=(0.2, 0.85))
    #sns.kdeplot(x, bw=bin_w, ax=ax, label='density_est_by_sns.kdeplot')
    plt.show()
    f.savefig('Uncertainty/cppe-0.33.jpg', dpi=100, bbox_inches='tight')


